var v_idf,PerController=function(){function a(){b()}function b(){d()}function c(){cordova.plugins.barcodeScanner.scan(function(a){var b=new BeanPersonalQr(a.text,oUsuario.Id_bodega);CatalogosModel.PersonalRegistro(b,function(a){if("object"==typeof a){x$("#div_foto").removeClass("hidden"),x$("#p_mensaje").html(a.Mensaje);try{v_idf=a.Idf,h("perfoto/"+v_idf+".jpg")}catch(a){alert(a)}null==a.PPerReg&&x$("#p_mensaje").addClass("error")}else x$("#p_mensaje").addClass("error"),x$("#p_mensaje").html(a)})},function(a){Common.notificationAlert(a,"Fallo escaneo","Ok")})}function d(){try{v_idf="",x$("#btn_registrar").on("click",function(){x$("#p_mensaje").html(""),x$("#p_mensaje").removeClass("error"),x$("#div_foto").addClass("hidden"),c()})}catch(a){Common.notificationAlert(a,"Error","Ok")}}function e(a,b,c){if(null!=a||null!=b||null!=c){navigator.connection.type!=Connection.NONE&&f(a,b,c)}}function f(a,b,c){function d(d){var h=encodeURI(a);ext=h.substr(h.lastIndexOf(".")+1),d.root.getDirectory(b,{create:!0,exclusive:!1},e,f);var i=d.root,j=i.fullPath;j=j+"/"+b+"/"+c+"."+ext,j="data/data/com.phonegap.helloworld/files/files/perfoto/"+c+"."+ext,g(h,j)}function e(a){console.log(a.fullPath)}function f(a){alert("Unable to create new directory: "+a.code)}function h(a){alert(a.target.error.code)}window.requestFileSystem(LocalFileSystem.PERSISTENT,0,d,h)}function g(a,b){(new FileTransfer).download(a,b,function(a){},function(a){alert("download error source "+a.target)})}function h(a){window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(b){b.root.getFile(a,{create:!1},i,j)},k)}function i(a){x$("#img_foto").attr("src","file:///data/data/com.phonegap.helloworld/files/files"+a.fullPath)}function j(){x$("#img_foto").attr("src",urlHandler+"rpt/personal/"+v_idf+"/Foto.jpg"),e(urlHandler+"rpt/personal/"+v_idf+"/Foto.jpg","perfoto",v_idf)}function k(a){console.log(a.target.error.code)}this.Init=a};